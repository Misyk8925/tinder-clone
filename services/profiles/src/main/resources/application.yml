logging:
  level:
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
server:
  port: 8010
  servlet:
    context-path: /api/v1/profiles
spring:
  config:
    import: "optional:file:services/profiles/.env.properties"
  kafka:
    bootstrap-servers: localhost:9092

    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
      acks: all
      retries: 3
      properties:
        max.in.flight.requests.per.connection: 5
        enable.idempotence: true
        spring.json.add.type.headers: false

  datasource:
    url: jdbc:postgresql://127.0.0.1:54322/postgres
    username: postgres
    password: postgres
  security:
    oauth2:
      resourceserver:
        jwt:
          jwk-set-uri:  http://localhost:9080/realms/spring/protocol/openid-connect/certs
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
  data:
    redis:
      host: localhost
      port: 6379
  cache:
    type: redis
  servlet:
    multipart:
      max-file-size: 50MB
      max-request-size: 60MB
  application:
    name: profiles-service
  cloud:
    config:
      enabled: false
app:
  s3:
    bucket: ${AWS_S3_BUCKET:placeholder-bucket}
    presign-exp-seconds: 300
  cloudfront:
    domain: ${CLOUDFRONT_DOMAIN:d123example.cloudfront.net}
    enabled: ${CDN_ENABLED:false}
  geocoding:
    user-agent: "TinderClone/1.0 (tclone@tclone.com)"
    base-url: "https://nominatim.openstreetmap.org"
    country-codes:  "de,at,pl"
    timeout-ms: 5000
    retries: 3

cloud:
  aws:
    region: eu-north-1
    credentials:
      access-key: ${AWS_ACCESS_KEY_ID:placeholder-access-key}
      secret-key: ${AWS_SECRET_ACCESS_KEY:placeholder-secret-key}
    s3:
      endpoint: ${AWS_S3_ENDPOINT:}

keycloak:
  auth-server-url: http://localhost:6700
  realm: spring
  client-id: profiles-service

# Kafka topics
kafka:
  topics:
    profile-events:
      updated: profile.updated
      created: profile.created
      deleted: profile.deleted
